<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Treinamento JUnit</title>

	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/simple.css">
	<link rel="stylesheet" href="style.css">

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/monokai.css">

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName('head')[0].appendChild(link);
	</script>
</head>

<body>
	<div class="reveal">
		<img src="image/layout_everis.PNG" alt="" height="100%" width="100%" style="opacity: 0.2">
		<div class="slides">
			<section>
				<h5 style="color:black">Testes unitários com <span style="font-family: serif;">
						<span style="color: #004c00; font-weight: bold;">J</span><span
							style="color: red; font-weight: bold">Unit</span></span>
			</section>
			<section>
				<h5 style="color: #004c00; margin-top: 50px;">Sobre Evandro</h5>
				<section>
					<div class="texto">
						<p>Projetos:</p>
						<p>IN100</p>
						<p>PDV</p>
						<p>Controlaí</p>
						<p>Squad Esteira II</p>
					</div>
				</section>
				<section>
					<div class="texto">
						<p>Java</p>
						<p>Maven, Gradle</p>
						<p>Spring MVC, data JPA, Batch, actuator, boot</p>
						<p>SQL Server, MySql, MariaDB, Postgresql</p>
						<p>MongoDB, Cassandra, Redis</p>
						<p>APM, new relic, appDynamic, Prometheus</p>
						<p>Camel, Kafka, git, JUnit</p>
					</div>
				</section>
			</section>
			<section>
				<h6 style="color:#004c00">Testes unitários</h6>
				<h6>O que é ?</h6>
				<h6>Por quê ?</h6>
				<h6>Como ?</h6>
			</section>
			<section>
				<h5>Teste unitário</h5>
				<h5>
					É um nível de teste, em que a unidade e comportamentos individuais são testados, tem como objetivo
					validar que cada unidade funcione conforme projetado.
				</h5>
			</section>
			<section>
				<h5>Por quê ?</h5>
				<div class="textoPadrao">
					<ul>
						<li>
							<h5>Um código testado é mais confiável</h5>
						</li>
						<li>
							<h5>Previne contra "BUG'S"</h5>
						</li>
						<li>
							<h5>Permite alteração sem medo</h5>
						</li>
						<li>
							<h5>Gera e preserva um "conhecimento" sobre as regras de negócios do projeto</h5>
						</li>
						<li>
							<h5>Qualidade de código - S.O.L.I.D</h5>
						</li>
						<li>
							<h5>...</h5>
						</li>
					</ul>
				</div>
			</section>
			<section class="fragments">
				<section>
					<h5 class="fargment">Como ?</h5>
					<div class="fragment .fade-in">
						<h5>
							<span style="font-family: serif;">
								<span style="color: #004c00; font-weight: bold;">J</span><span
									style="color: red; font-weight: bold">Unit</span></span>
						</h5>
						<h5>
							"É um framework que facilita o desenvolvimento e execução de testes unitários em um código java"
						</h5>
					</div>
				</section>
				<section>
					<h5>Vantagens</h5>
					<ul class="textoPadrao">
						<li>
							<h5>Verifica se cada unidade esta funcionando da forma esperada</h5>
						</li>
						<li>
							<h5>Facilita a criação, execução automática e apresentação dos resultados</h5>
						</li>
						<li>
							<h5>É free</h5>
						</li>
					</ul>
				</section>
				<section>
					<h5>Desvantagens</h5>
					<ul class="textoPadrao">
						<li>
							<h5>Métodos privados, estáticos e variáveis locais não podem ser testados</h5>
						</li>
						<li>
							<h5>
								Nem todos os erros podem ser detectados pois os módulos são testados separadamente e
								posteriormente diferentes erros de integração podem aparecer</h5>
						</li>
						<li>
							<h5>Não gera relátorio HTML</h5>
						</li>
					</ul>
				</section>
				<section>
					<h5>xUnit</h5>
					<img class="img" src="image/xunit.PNG" alt="book xUnit Test Patterns">
				</section>
			</section>
			<section>
				<h5>Princípios de um teste unitário (F.I.R.S.T)</h5>
				<div class="textoPadrao">
					<ul>
						<li>
							<h5><u>F</u>ast - Um teste unitário deve ser executado rápido</h5>
						</li>
						<li>
							<h5><u>I</u>ndepentent - Não deve depender de outro, podendo rodar em qualquer ordem</h5>
						</li>
						<li>
							<h5><u>R</u>epeatable - Pode ser executado quantas vezes quiser, mas trazendo o mesmo resultado</h5>
						</li>
						<li>
							<h5><u>S</u>elf-Verifying - Auto verificavel, saber quando a execução foi correta e quando falhou</h5>
						</li>
						<li>
							<h5><u>T</u>imely - Deve ser criado no momento correto</h5>
						</li>
					</ul>

				</div>
			</section>
			<section>
				<h5>
					Alguns macetes:
				</h5>
				<ul class="textoPadrao">
					<li>
						<h5>Comece pelos mais simples</h5>
					</li>
					<li>
						<h5>Use apenas dados sufiicentes (não testes 10 condições se três forem sufiicentes)</h5>
					</li>
					<li>
						<h5>Achou um bug? Não conserte sem antes escrever um teste que pegue</h5>
					</li>
				</ul>
			</section>
			<section>
				<h5>Incluindo como dependência</h5>
				<img class="img" src="image/junit-maven.PNG">
			</section>
			<section>
				<h5>Assertivas</h5>
				<pre>
					<h5>
						Assert.assertTrue(boolean)

						Assert.assertFalse(boolean)

						Assert.assertEquals(expected, actual)

						Assert.assertEquals(expected, actual, delta)

						Assert.assertSame(obj, obj)

						Assert.assertNotSame(obj, obj)
					</h5>
				</pre>
			</section>
			<section>
				<h5>assertThat</h5>
				<pre>
					<h5>
						Assert.assertThat(atual, Matcher)
						CoreMathers - Hamcrest matchers
					</h5>
				</pre>
			</section>
			<section>
				<h5>Tratamento de erros (falha x erro)</h5>
				<pre>
					<h5>
						@Test(expected = Exception.class)

						Assert.fail("erro")

						ExpectedException
					</h5>
				</pre>
			</section>
			<section>
				<h5>Before/After</h5>
				<pre>
					<h5>
						@Before
						@BeforeClass
						@After
						@AfterClass
					</h5>
				</pre>
			</section>
			<section>
				<h5>Ignorando testes</h5>
				<div>
					<pre>
						<h5>
							@Ignore
							Assume
					</h5>
					</pre>
				</div>
			</section>
			<section>
				<h5>Suíte de tests</h5>
				<div>
					<pre>
						<h5 style="justify-content: left;">
							@RunWith(Suite.class) 
							@SuiteClasses({
								Test0.class,
								Test1.class,
								.....
							})
						</h5>
					</pre>
				</div>
			</section>
			<section>
				<h5>Análise de cobertura</h5>
			</section>
			<section>
				<ul>
					<li>
						<h5>É a porcentagem de código coberta por testes automatizados.</h5>
					</li>
					<li>
						<h5>Faz parte de um ciclo de feedback no processo de desenvolvimento.</h5>
					</li>
					<li>
						<h5>Determina quais instruções forma executadas.</h5>
					</li>
				</ul>
			</section>
			<section>
				<h5>Por quê ?</h5>
				<ul>
					<li>
						<h5>Melhora a qualidade e previsibilidade do software.</h5>
					</li>
					<li>
						<h5>Saber como nossos testes realmente testaram o código.</h5>
					</li>
					<li>
						<h5>Saber se os testes são suficentes.</h5>
					</li>
					<li>
						<h5>Manter a qualidade do teste durante o clico de vida de projeto.</h5>
					</li>
				</ul>
			</section>
			<section>
				<img src="/image/jacoco.PNG">
			</section>
			<section>
				<h5>Jacoco é uma biblioteca de código aberto para Java, criada pela Eclemma.</h5>
				<h5>Gera relatórios de cobertura de código.</h5>
			</section>
			<section>
				<h5>Plugin</h5>
				<img src="/image/pluginJacoco.PNG" />
			</section>
			<section>
				<h5>target/site/jacoco/index.html</h5>
				<img src="/image/coveregeReport.PNG" alt="" class="img">
			</section>
			<section>
				<h5>Dependências</h5>
				<img src="/image/dependencias.PNG" class="img">
			</section>
			<section class="fragments">
				<img src="/image/mockito.PNG" alt="" class="img">
				<h5 class="fragment .fade-in">É uma biblioteca de código aberto para java, que permite a criação, verificação e
					stubbing simulados</h5>
			</section>
			<section class="fragments">
				<div>
					<h5>Vantagens</h5>
					<ul>
						<li>
							<h5>Possibilita criar mocks de classes concretas e interfaces</h5>
						</li>
						<li>
							<h5>O setup de criação de mock é simples</h5>
						</li>
						<li>
							<h5>Permite a verificação por meio de matchers</h5>
						</li>
					</ul>
				</div>
				<div class="fragment .fade-in">
					<h5>Desvantagens</h5>
					<ul>
						<li>
							<h5>É necessário uso da versão 1.6 ou superior do Java</h5>
						</li>
						<li>
							<h5>Não é possivel criar mocks de classes final</h5>
						</li>
						<li>
							<h5>Não é possivel fazer mocks de métodos estáticos ou privados</h5>
						</li>
					</ul>
				</div>
			</section>
			<section>
				<img src="/image/dependencia-maven.PNG" class="img" />
			</section>
			<section>
				<h5>Maneiras de inicializar</h5>
				<div style="display: grid;">
					<img src="/image/init1.PNG" class="img">
					<img src="/image/init2.PNG" class="img">
					<img src="/image/init3.PNG" class="img">
				</div>
			</section>
			<section>
				<section>
					<h5>Anotações</h5>
					<h5>@Mock - Cria e injeta instâncias simuladas</h5>
					<img src="/image/mock.PNG" class="img">
				</section>
				<section>
					<h5>@Spy - Espiona uma instância existente</h5>
					<img src="/image/spy.PNG" class="img">
				</section>
				<section>
					<h5>@Captor - Deve ser criado uma instância de ArgumentCaptor para obter argumentos capturados</h5>
					<img src="/image/argumentcapture.PNG" class="img">
				</section>
				<section>
					<h5>@InjectMocks - Usado para injetar mocks no objeto testado</h5>
					<img src="/image/injectmocks.PNG" class="img">
				</section>
			</section>
			<section>
				<h5>Configurar comportamentos</h5>
				<div style="text-align: left; font-size: 30px;">
					<h6>when(listMock.add(anyString())).thenReturn(false);</h6>
					<h6>when(listMock.add(anyString())).thenThrow(IllegalStateException.class);</h6>
					<h6>when(listMock.size()).thenCallRealMethod();</h6>
					<h6>doCallRealMethod().when(myList).add(any(Integer.class), any(String.class));</h6>
					<h6>doReturn(false).when(listMock).add(anyString());</h6>
					<h6>doThrow(NullPointerException.class).when(listMock).clear();</h6>
					<h6>doNothing().when(myList).add(isA(Integer.class), isA(String.class));</h6>
				</div>
			</section>
			<section>
				<h5>PowerMockito</h5>
				<h5>É uma Api para suporte ao Mockito</h5>
				<h5>Provem a capacidade de criar mock para metodos final, static ou privados através da Api de Reflection do Java</h5>
			</section>
			<section>
				<h5>Dependências</h5>
				<img src="/image/dependencia-powerMock.PNG" alt="" class="img">
			</section>
			<section>
				<section>
					<h5 class="textoPadrao">É necessário preparar os caso de testes para que funcionem com o PowerMockito</h5>
					<img src="/image/start-powerMock.PNG" alt="" class="img">
					<h5 class="textoPadrao">Cria um mock utilizando a API do PowerMockito</h5>
					<img src="/image/mockFinalMethod-powermock.PNG" alt="" class="img">
					<h5 class="textoPadrao">Diz para que sempre que um construtor sem argumentos for invocado o mock deverá ser retornado</h5>
					<img src="/image/criandoNovo-powermock.PNG" alt="" class="img">
				</section>
				<section>
					<h5 class="textoPadrao">Mock metodos estáticos</h5>
					<img src="/image/mockstaticmethod-powermock.PNG" alt="" class="img">
					<h5 class="textoPadrao">Definindo retorno</h5>
					<img src="/image/defineReturnMethod-powermock.PNG" alt="" class="img">
					<img src="/image/defineReturnMethod-powermock2.PNG" alt="" class="img">
				</section>
			</section>
			<section>
				<h5 style="font-size: 30px;">Os testes também é desenvolvimento e fazem parte da sua entrega.</h5>
				<h5 style="font-size: 30px;">Sigam os princípios de F.I.R.S.T. e façam testes coesos.</h5>
				<h2>Obrigado!</h2>
			</section>
		</div>
	</div>

	<script src="js/reveal.js"></script>

	<script>
		// More info about config & dependencies:
		// - https://github.com/hakimel/reveal.js#configuration
		// - https://github.com/hakimel/reveal.js#dependencies
		Reveal.initialize({
			dependencies: [
				{ src: 'plugin/markdown/marked.js' },
				{ src: 'plugin/markdown/markdown.js' },
				{ src: 'plugin/notes/notes.js', async: true },
				{ src: 'plugin/highlight/highlight.js', async: true }
			]
		});
	</script>
</body>

</html>